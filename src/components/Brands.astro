---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import brand1 from "../assets/brands/1.png";
import brand2 from "../assets/brands/2.png";
import brand3 from "../assets/brands/3.png";
import brand4 from "../assets/brands/4.png";
import brand5 from "../assets/brands/5.png";
import brand6 from "../assets/brands/6.png";

// Duplicate for continuous scroll
const brandImages = [brand1, brand2, brand3, brand4, brand5, brand6];

// Create a double list for the marquee effect
const marqueeImages = [...brandImages, ...brandImages];

type Props = NonNullable<CollectionEntry<"pages">["data"]["brands"]>;

const { title, highlight } = Astro.props as Props;
---

<section
  id="brands-section"
  class="py-12 pb-20 border-y border-white/5 bg-white/5 overflow-hidden transition-colors duration-300"
>
  <div class="max-w-7xl mx-auto px-6 md:px-12 text-center mb-16">
    <h3 class="font-poppins font-semibold text-[36px] leading-[54px]">
      {title}
      <span
        class="text-transparent bg-clip-text bg-gradient-to-r from-[#4068FC] to-[#00229D]"
        >{highlight}</span
      >
    </h3>
  </div>

  <div class="relative w-full overflow-hidden mask-fade">
    <div class="flex animate-marquee hover:pause whitespace-nowrap">
      {
        marqueeImages.map((brand, index) => (
          <div class="inline-block w-[200px] md:w-[250px] p-4 shrink-0">
            <div class="w-full aspect-[16/9] flex items-center justify-center bg-white rounded-2xl shadow-sm border border-gray-100 p-0 transition-transform hover:scale-105 duration-300 overflow-hidden">
              <Image
                src={brand}
                alt={`Brand logo ${index + 1}`}
                class="w-full h-full object-cover object-bottom"
              />
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .animate-marquee {
    animation: marquee 20s linear infinite;
  }

  .hover\:pause:hover {
    animation-play-state: paused;
  }

  /* Gradient mask for smooth fade check */
  .mask-fade {
    -webkit-mask-image: linear-gradient(
      to right,
      transparent,
      black 10%,
      black 90%,
      transparent
    );
    mask-image: linear-gradient(
      to right,
      transparent,
      black 10%,
      black 90%,
      transparent
    );
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  :global([data-theme="light"]) #brands-section {
    background: #ffffff !important;
    border-top: 1px solid #e5e7eb !important;
    border-bottom: 1px solid #e5e7eb !important;
  }

  :global([data-theme="light"]) #brands-section h3 {
    color: #000000 !important;
  }
</style>
