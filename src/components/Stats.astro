---
import type { CollectionEntry } from "astro:content";

type Props = CollectionEntry<"pages">["data"]["stats"];

const { label, title, highlight, description, items } = Astro.props as Props;
---

<section
  id="stats-section"
  class="py-20 px-6 md:px-12 max-w-7xl mx-auto transition-colors duration-300"
>
  <div class="mb-12">
    <span class="text-blue-500 font-semibold uppercase tracking-wider text-sm"
      >{label}</span
    >
    <h2 class="text-3xl md:text-5xl font-bold mt-2 font-outfit">
      {title}
      <span class="text-blue-500">{highlight}</span>
    </h2>
    <p class="text-gray-400 mt-4 max-w-2xl">
      {description}
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    {
      items.map((stat) => (
        <div class="stat-card bg-white/5 backdrop-blur-sm border border-white/10 p-8 rounded-2xl hover:bg-white/10 transition-colors group opacity-0 translate-y-8">
          <div class="w-12 h-12 bg-blue-600/20 rounded-xl flex items-center justify-center mb-6 text-blue-400 group-hover:scale-110 transition-transform">
            {/* Icons */}
            {stat.icon === "map-pin" && (
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                />
              </svg>
            )}
            {stat.icon === "eye" && (
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                />
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                />
              </svg>
            )}
            {stat.icon === "refresh-cw" && (
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                />
              </svg>
            )}
            {stat.icon === "target" && (
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            )}
          </div>
          <h3 class="text-xl font-bold mb-3 font-outfit">{stat.title}</h3>
          <p class="text-gray-400 text-sm leading-relaxed">{stat.desc}</p>
        </div>
      ))
    }
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  gsap.to(".stat-card", {
    scrollTrigger: {
      trigger: ".stat-card",
      start: "top 80%",
    },
    y: 0,
    opacity: 1,
    duration: 0.8,
    stagger: 0.2,
    ease: "power2.out",
  });
</script>

<style>
  :global([data-theme="light"]) #stats-section h2 {
    color: #000000;
  }
  :global([data-theme="light"]) #stats-section p.text-gray-400 {
    color: #4b5563; /* gray-600 */
  }

  /* Stat Card Overrides */
  :global([data-theme="light"]) .stat-card {
    background-color: #ffffff !important;
    border: 1px solid #e2e8f0 !important; /* slate-200 */
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  :global([data-theme="light"]) .stat-card:hover {
    background-color: #f8fafc !important; /* slate-50 */
    transform: translateY(-2px);
    box-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }

  :global([data-theme="light"]) .stat-card h3 {
    color: #000000;
  }
</style>
