---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import icon1 from "../assets/stats/1.svg";
import icon2 from "../assets/stats/2.svg";
import icon3 from "../assets/stats/3.svg";
import icon4 from "../assets/stats/4.svg";

type Props = NonNullable<CollectionEntry<"pages">["data"]["stats"]>;

const { label, title, highlight, description, items } = Astro.props as Props;

const icons = [icon1, icon2, icon3, icon4];
---

<section
  id="stats-section"
  class="py-20 w-full bg-[#FAFBFF] transition-colors duration-300"
>
  <div class="px-6 md:px-12 max-w-7xl mx-auto">
    <div class="mb-12 flex flex-col items-start gap-2 max-w-4xl">
      <span
        class="font-poppins font-medium text-[20px] leading-[30px] text-[#3253CC]"
        >{label}</span
      >
      <h2
        class="font-poppins font-semibold text-[36px] leading-[54px] text-[#232323]"
      >
        {title}
        <span
          class="text-transparent bg-clip-text bg-gradient-to-r from-[#4068FC] to-[#00229D]"
          >{highlight}</span
        >
      </h2>
      <p
        class="font-poppins font-normal text-[20px] leading-[30px] text-[#565656] max-w-3xl"
      >
        {description}
      </p>
    </div>

    <div
      class="flex flex-col items-center p-6 gap-6 w-full max-w-[1280px] bg-[#EAEEFE] border border-[#E5EBFF] rounded-xl mx-auto"
    >
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 w-full">
        {
          items.map((stat, index) => (
            <div class="stat-card bg-white border border-white/10 p-8 rounded-2xl">
              <div class="w-12 h-12 bg-[#3253CC]/10 rounded-xl flex items-center justify-center mb-6 text-[#3253CC] group-hover:scale-110 transition-transform">
                {/* Icons */}
                <Image
                  src={icons[index] || icon1}
                  alt={stat.title}
                  class="w-6 h-6 object-contain"
                />
              </div>
              <div>
                <h3 class="text-xl font-bold mb-3 font-outfit">{stat.title}</h3>
                <p class="text-[#5A5A5A] text-sm leading-relaxed">
                  {stat.desc}
                </p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  gsap.to(".stat-card", {
    scrollTrigger: {
      trigger: ".stat-card",
      start: "top 80%",
    },
    y: 0,
    opacity: 1,
    duration: 0.8,
    stagger: 0.2,
    ease: "power2.out",
  });
</script>

<style>
  :global([data-theme="light"]) #stats-section h2 {
    color: #000000;
  }
  :global([data-theme="light"]) #stats-section p.text-gray-400 {
    color: #4b5563; /* gray-600 */
  }

  /* Stat Card Overrides */
  :global([data-theme="light"]) .stat-card {
    background-color: #ffffff !important;
    border: 1px solid #e2e8f0 !important; /* slate-200 */
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  :global([data-theme="light"]) .stat-card:hover {
    background-color: #f8fafc !important; /* slate-50 */
    transform: translateY(-2px);
    box-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.1),
      0 4px 6px -2px rgba(0, 0, 0, 0.05);
  }

  :global([data-theme="light"]) .stat-card h3 {
    color: #000000;
  }
</style>
